function getDownloadLink(t){return'<button class="btn btn-sm btn-default pull-right" onclick="getFile('+t+');">Download&nbsp;<span class="glyphicon glyphicon-download"></span></button>'}function bindVideoError(){document.querySelector("source").addEventListener("error",function(){var t=document.createElement("div");t.innerHTML='<div class="text-center" style="margin:15px 0 28px;"><p>This video format cannot be streamed, but you can still download it below.</p></div>',this.parentNode.parentNode.replaceChild(t,this.parentNode)},!1)}$(document).ready(function(){var t=$_GET("_");parseInt(t)&&t>0&&$("#select_ADK_HIKER").val($_GET("_")),$("#select_ADK_HIKER").on("change",function(){window.location="gallery?_="+this.value}),$("#select_filter").on("change",function(){var t=document.querySelectorAll("li.gallery");if(""===this.value)for(var e=0;e<t.length;e++)t[e].style.display="";else for(var e=0;e<t.length;e++){var i=-1!==this.value.indexOf(",")?t[e].getAttribute("data-peaks"):t[e].getAttribute("data-peaks").split(",");if(-1!==this.value.indexOf(",")){var i=t[e].getAttribute("data-peaks");i!==this.value.replace(/, /g,",")?t[e].style.display="none":t[e].style.display=""}else{var i=t[e].getAttribute("data-peaks").split(",");-1===i.indexOf(this.value)?t[e].style.display="none":t[e].style.display=""}}}),$(".photo").click(function(){var t=getDownloadLink(this.getAttribute("data-id"))+"<strong>"+this.getAttribute("data-un")+"</strong><br />"+this.getAttribute("data-peaks")+'<div class="hr"></div>'+this.getAttribute("data-desc");document.getElementById("modal_gallery_label").innerHTML=this.children[0].getAttribute("alt"),document.getElementById("modal_gallery_desc").innerHTML=t;var e=this.children[0].cloneNode();return e.setAttribute("data-original",e.src.replace("&t=t","")),e.src="img/loading.gif",e.classList.remove("imghover"),$("#modal_gallery_container").html("").append(e),$(e).attr("src",$(e).data("original")),!0}),$(".video").click(function(){var t=this.getAttribute("data-id"),e=this.children[0].innerHTML,i=getDownloadLink(this.getAttribute("data-id"))+"<strong>"+this.getAttribute("data-un")+"</strong><br />"+this.getAttribute("data-peaks")+'<div class="hr"></div>'+this.getAttribute("data-desc");document.getElementById("modal_gallery_label").innerHTML=e,document.getElementById("modal_gallery_desc").innerHTML=i;var n=document.createElement("video");return n.setAttribute("id","video"),n.setAttribute("controls","controls"),n.setAttribute("width","100%"),n.innerHTML='<source id="videosource" src="includes/fileGetVideo.php?_='+t+'" type="video/'+e.split(".").pop()+'" />',document.getElementById("modal_gallery_container").innerHTML=n.outerHTML,bindVideoError(),!0})});
!function(e){e.fn.downloader=function(t){if(this.length){e.fn.downloader.makeFileInput=function(){var t=e.fn.downloader.getFileIndex(),n=document.createElement("input");return n.setAttribute("type","file"),n.setAttribute("id",t),n.setAttribute("name",t+"[]"),n.setAttribute("multiple","multiple"),n.classList.add("fileInput"),n.style.display="none",e.fn.downloader.fileIndex_increment(),n},e.fn.downloader.updateFileList=function(){var t=document.getElementById("table_fileList");if(n.desc)for(var d=[],i=0;i<t.children[1].children.length;i++)d.push({name:t.children[1].children[i].children[0].children[0].innerHTML,desc:t.children[1].children[i].children[1].children[0].value});t.children[1].innerHTML="";for(var l=document.getElementsByClassName("fileInput"),a=0,i=0;i<l.length-1;i++)for(var r=0;r<l[i].files.length;r++){var o=document.createElement("span");o.className="redhover",o.innerHTML=l[i].files[r].name,o.setAttribute("data-inputid","file"+i),e(o).on("click",function(){e.fn.downloader.removeFile(this)});var s=document.createElement("td");s.appendChild(o),s.setAttribute("title","Size: "+e.fn.downloader.bytesToSize(l[i].files[r].size)+"  Type: "+l[i].files[r].type+"\nClick to Remove"),s.setAttribute("data-toggle","tooltip"),s.setAttribute("data-container","body");var u=document.createElement("tr");if(u.appendChild(s),n.desc){for(var c="",f=0;f<d.length;f++)if(l[i].files[r].name==d[f].name){c=d[f].desc;break}var m=document.createElement("td");m.innerHTML='<input type="text" name="file_'+a+'_desc" class="'+n.classes.input+'" value="'+c+'" maxlength="1024" />',u.appendChild(m)}t.children[1].appendChild(u),a++}0===t.children[1].children.length?e("#table_fileList th").css("visibility","hidden"):e("#table_fileList th").css("visibility",""),tooltip()},e.fn.downloader.getNewFileInput=function(){return e(".fileInput").last()[0]},e.fn.downloader.getFileIndex=function(){return"file"+document.getElementById("hidden_fileIndex").value},e.fn.downloader.fileIndex_increment=function(){var e=document.getElementById("hidden_fileIndex");e.value=parseInt(e.value)+1},e.fn.downloader.rebind=function(){e(".fileInput").unbind().on("change",function(){e.fn.downloader.filesAdded()})},e.fn.downloader.addFile=function(){e.fn.downloader.getNewFileInput().click()},e.fn.downloader.removeFile=function(t){function n(){for(var e=document.getElementsByClassName("fileInput"),t=0;t<e.length;t++)e[t].setAttribute("id","file"+t),e[t].setAttribute("name","file"+t);document.getElementById("hidden_fileIndex").value=t}var d=e(t).data("inputid");e("#"+d).remove(),n();document.getElementById("hidden_fileIndex");e.fn.downloader.updateFileList(),e.fn.downloader.rebind()},e.fn.downloader.removeAll=function(){e('input[id^="file"]').remove(),document.getElementById("hidden_fileIndex").value=0,document.getElementById("div_inputFileWrapper").appendChild(e.fn.downloader.makeFileInput()),e.fn.downloader.updateFileList(),e.fn.downloader.rebind()},e.fn.downloader.filesAdded=function(){e.fn.downloader.preExists()?(e.fn.downloader.removeLastAdd(),e.fn.downloader.showError()):(document.getElementById("div_inputFileWrapper").appendChild(e.fn.downloader.makeFileInput()),e.fn.downloader.updateFileList(),e.fn.downloader.rebind())},e.fn.downloader.preExists=function(){function e(){for(var e=t[t.length-1].files,n=[],d=0;d<e.length;d++)n[d]=e[d].name;return n}for(var t=document.getElementsByClassName("fileInput"),n=e(),d=0;d<t.length-1;d++)for(var i=0;i<t[d].files.length;i++){var l=t[d].files[i].name;if(-1!==n.indexOf(l))return!0}return!1},e.fn.downloader.removeLastAdd=function(){var e=document.getElementsByClassName("fileInput");e[e.length-1].value=""},e.fn.downloader.showError=function(){alert("File already added")};{var n=e.extend({text:"Add File",clearText:"Remove All",classes:{button:"btn btn-sm btn-default",input:"form-control form-control-sm",a:"",container:"container-fluid"},desc:!1},t),d=this[0];d.id}d.className=d.className+" "+n.classes.container;var i=document.createElement("div");i.className="btn-group",i.style.display="inline-block",i.style.width="100%";var l=document.createElement("div");l.className="scroll300",l.style["margin-top"]="4px";var a=document.createElement("div");a.setAttribute("id","div_inputFileWrapper"),a.style.display="none";var r=document.createElement("table");r.setAttribute("id","table_fileList"),r.style["font-size"]="0.8em",r.style.width="100%",r.innerHTML='<thead><tr><th style="width:50%;visibility:hidden;">File</th><th style="width:50%;visibility:hidden;">Description/Credited to</th></tr></thead><tbody></tbody>';var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("id","hidden_fileIndex"),o.setAttribute("name","hidden_fileIndex"),o.value="0";var s=document.createElement("button");s.setAttribute("type","button"),s.innerHTML=n.text,s.className=n.classes.button,e(s).on("click",function(){e.fn.downloader.addFile()});var u=document.createElement("button");return u.setAttribute("type","button"),u.innerHTML=n.clearText,u.className=n.classes.button,e(u).on("click",function(){e.fn.downloader.removeAll()}),d.appendChild(o),d.appendChild(i),d.appendChild(l),d.appendChild(a),i.appendChild(s),i.appendChild(u),l.appendChild(r),a.appendChild(e.fn.downloader.makeFileInput()),e.fn.downloader.rebind(),this}}}($),$.fn.downloader.bytesToSize=function(e){var t=["bytes","KB","MB","GB","TB"];if(0==e)return"0 bytes";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,n),2)+t[n]};